<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<style>
		#game-board {
			display: grid;
			grid-template-columns: repeat(9, 50px);
			grid-template-rows: repeat(9, 50px);
		}

		.square {
			width: 50px;
			height: 50px;
			border: 1px solid #000;
			position: relative;
		}

		.pawn {
			width: 100%;
			height: 100%;
			background-color: #ffcc00;
			border-radius: 50%;
			cursor: pointer;
		}

		.disabled {
			background-color: #ccc;
			/* Disabled color */
		}

		.possible-move {
			background-color: #aaffaa;
		}
	</style>
	<title>Chess Board Demo</title>
</head>

<body>
	<div id="game-board"></div>

</body>
<script>
	document.addEventListener("DOMContentLoaded", function () {
		const gameBoard = document.getElementById("game-board");
		let boardArray = [
			[-1, 0, 1, 0, -1, 0, 0, 0],
			[0, 0, 0, 0, 0, 0, 0, 0],
			[1, 0, -1, 0, 0, 0, -1, 0],
			[0, 0, 0, 0, 1, 0, 0, 0],
			[-1, 0, 0, 1, 0, -1, 0, 0],
			[0, 0, 0, 0, 0, 0, 0, 0],
			[0, -1, 0, 0, 0, 0, 0, 1],
			[0, 0, 0, 0, -1, 0, 1, 0],
		];

		function generateBoard() {
			for (let i = 0; i < 8; i++) {
				for (let j = 0; j < 8; j++) {
					const square = document.createElement("div");
					square.className = "square";
					square.id = `square-${i}-${j}`;
					square.addEventListener("click", handleSquareClick);
					gameBoard.appendChild(square);

					if (boardArray[i][j] === 1) {
						const pawn = document.createElement("div");
						pawn.className = "pawn";
						pawn.id = `pawn-${i}-${j}`;
						pawn.addEventListener("click", handlePawnClick);
						square.appendChild(pawn);
					}

					// Disable a 3x3 grid in each corner
					if ((i < 3 && j < 3) || (i > 4 && j < 3) || (i < 3 && j > 4) || (i > 4 && j > 4)) {
						square.classList.add("disabled");
					}
				}
			}
		}

		function handleSquareClick(event) {
			const square = event.target;
			const [squareRow, squareCol] = getSquarePosition(square.id);
			console.log(`Clicked on square: (${squareRow}, ${squareCol})`);

			// Check if the square is a possible move
			if (square.classList.contains("possible-move")) {
				const selectedPawn = document.querySelector(".selected");
				if (selectedPawn) {
					const [pawnRow, pawnCol] = getPawnPosition(selectedPawn.id);
					movePawn(selectedPawn, pawnRow, pawnCol, squareRow, squareCol);
				}
			}
		}

		function handlePawnClick(event) {
			const pawn = event.target;
			const [pawnRow, pawnCol] = getPawnPosition(pawn.id);
			console.log(`Clicked on pawn: (${pawnRow}, ${pawnCol})`);

			// Remove possible move indicators
			clearPossibleMoves();

			// Show possible moves
			showPossibleMoves(pawnRow, pawnCol);

			// Highlight the selected pawn
			pawn.classList.add("selected");
		}

		function getPawnPosition(pawnId) {
			const [, pawnRow, pawnCol] = pawnId.match(/pawn-(\d+)-(\d+)/);
			return [parseInt(pawnRow), parseInt(pawnCol)];
		}

		function getSquarePosition(squareId) {
			const [, squareRow, squareCol] = squareId.match(/square-(\d+)-(\d+)/);
			return [parseInt(squareRow), parseInt(squareCol)];
		}

		function showPossibleMoves(row, col) {
			// Implement logic to show possible moves visually
			const possibleMoves = [
				[row - 1, col],
				[row + 1, col],
				[row, col - 1],
				[row, col + 1],
			];

			possibleMoves.forEach(([r, c]) => {
				const square = document.getElementById(`square-${r}-${c}`);
				if (square && !square.classList.contains("disabled")) {
					square.classList.add("possible-move");
				}
			});
		}

		function clearPossibleMoves() {
			const possibleMoves = document.querySelectorAll(".possible-move");
			possibleMoves.forEach(move => move.classList.remove("possible-move"));
		}

		function movePawn(pawn, fromRow, fromCol, toRow, toCol) {
			// Move the pawn to the new position
			const toSquare = document.getElementById(`square-${toRow}-${toCol}`);
			toSquare.appendChild(pawn);

			// Update the boardArray
			boardArray[toRow][toCol] = 1;
			boardArray[fromRow][fromCol] = 0;

			// Remove possible move indicators
			clearPossibleMoves();

			// Deselect the pawn
			pawn.classList.remove("selected");
		}

		// Initialize the board
		generateBoard();
	});
</script>
</body>

</html>
